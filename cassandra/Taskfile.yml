# https://taskfile.dev

version: "3"

vars:
  GREETING: Hello, World!

tasks:
  startA:
    cmds:
      - echo "Starting node A"
      - go run . --port=50051 --node-id=node-1
  startB:
    cmds:
      - echo "Starting node B (client mode)"
      - go run . --port=50052 --node-id=node-2 --client --target=127.0.0.1:50051
  init:
    deps:
      - startA
      # - startB
  kill:
    cmds:
      - lsof -t -i:50051 -i:50052 | xargs kill -9
  default:
    cmds:
      - echo "{{.GREETING}}"
    silent: true
