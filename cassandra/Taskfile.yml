# https://taskfile.dev

version: "3"

vars:
  GREETING: Hello, World!

tasks:
  startA:
    cmds:
      - echo "Starting node A"
      - go run main.go --port=50051 --node-id=node-1
  startB:
    cmds:
      - echo "Starting node B (client mode)"
      - go run main.go --node-id=node-2 --client --target=127.0.0.1:50051
  init:
    deps:
      - startA
      - startB
    cmds:
      - go mod tidy
  default:
    cmds:
      - echo "{{.GREETING}}"
    silent: true
